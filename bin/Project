#!/usr/bin/env python
"""
This utility helps with my projects. Valid subcommands:
[1] CreateProject
[2] ListProjects
[3] AddProject
[4] MakePackage
[5] BuildProject
"""

import os
import sys

sys.path.append(os.path.dirname(os.path.realpath(__file__)) + "/../")
sys.dont_write_bytecode = True

from libs import CreateProject
from libs import AddProject
from libs.Utils import Utils
from libs.Project import Project, ProjectException
from libs import MakePackage
from libs import BuildProject
from libs.Build import BuilderException


def main():
    args = sys.argv
    if len(args) < 2:
        print("ERROR: Command required")
        print(__doc__)
        return 1
    command = args[1]
    args = args[2:]

    if command == "CreateProject":
        try:
            return CreateProject.getopts(args)
        except ProjectException as e:
            Utils.error(str(e))
    elif command == "AddProject":
        try:
            return AddProject.getopts(args)
        except ProjectException as e:
            Utils.error(str(e))
    elif command == "ListProjects":
        Project.show_projects()
    elif command == "MakePackage":
        try:
            return MakePackage.getopts(args)
        except BuilderException as e:
            Utils.error(str(e))
    elif command == "BuildProject":
        try:
            return BuildProject.getopts(args)
        except BuilderException as e:
            Utils.error(str(e))
            return False
    else:
        print("ERROR: Wrong command: " + command)
        print(__doc__)
        return 1
    return False

if __name__ == "__main__":
    main()
